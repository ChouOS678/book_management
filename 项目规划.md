#  智能车辆维保记录管理系统



------

##  功能模块

###  用户管理模块（基础认证）---汪士钧    3

- 用户注册 / 登录（JWT）
- 角色权限管理（管理员 / 普通用户）
- 用户信息查看与修改

###  车辆信息管理模块 ---姜钰林     3.5

- 新增 / 编辑 / 删除车辆信息
- 按车牌、VIN、车主查询
- 每辆车对应多个维保记录

###  维保记录管理模块（核心）---刘潼       4.5

- 新增维保记录（录入日期、项目、费用、服务人员等）
- 修改、删除记录
- 按车查询所有维保记录
- 按时间/项目/关键词筛选

###  报表与分析模块（增强展示）---王俊杰    1

- 按车辆统计维保次数、总费用
- 每月费用趋势图（ECharts）
- 服务项目使用频率排行



### 操作日志展示---王俊杰   3

- 显示后台管理员的操作日志



------

##  一、系统总表概览

| 表名                 | 说明                             |
| -------------------- | -------------------------------- |
| `user`               | 用户信息表（用于登录与权限控制） |
| `vehicle`            | 车辆档案信息表                   |
| `maintenance_record` | 维保记录主表                     |
| `maintenance_item`   | 每条维保记录的服务项目明细       |
|                      |                                  |
| `log`                | 系统操作日志表（记录用户操作）   |

------

##  二、详细表结构设计

------

###  `user` 用户表

| 字段名      | 类型         | 描述               | 约束         |
| ----------- | ------------ | ------------------ | ------------ |
| id          | BIGINT       | 用户主键           | 主键，自增   |
| username    | VARCHAR(50)  | 用户名             | 唯一，非空   |
| password    | VARCHAR(100) | 加密后密码         | 非空         |
| role        | ENUM         | 角色（admin/user） | 默认 user    |
| email       | VARCHAR(100) | 邮箱               | 可空         |
| phone       | VARCHAR(20)  | 手机号             | 可空         |
| create_time | DATETIME     | 创建时间           | 默认当前时间 |
| update_time | DATETIME     | 更新时间           | 自动更新     |

**索引：**

- `username` 唯一索引

------

###  `vehicle` 车辆信息表

| 字段名        | 类型        | 描述             | 约束             |
| ------------- | ----------- | ---------------- | ---------------- |
| id            | BIGINT      | 车辆主键         | 主键，自增       |
| license_plate | VARCHAR(20) | 车牌号           | 唯一，非空       |
| vin           | VARCHAR(50) | 车架号 VIN       | 唯一，非空       |
| brand         | VARCHAR(50) | 品牌（如比亚迪） | 可空             |
| model         | VARCHAR(50) | 型号（如汉EV）   | 可空             |
| owner_name    | VARCHAR(50) | 车主姓名         | 可空             |
| owner_phone   | VARCHAR(20) | 车主电话         | 可空             |
| user_id       | BIGINT      | 所属用户（归属） | 外键 → `user.id` |
| create_time   | DATETIME    | 创建时间         | 默认当前时间     |
| update_time   | DATETIME    | 更新时间         | 自动更新时间     |

**索引：**

- `license_plate` 唯一
- `vin` 唯一
- `user_id` 外键索引

------

###  `maintenance_record` 维保记录表

| 字段名         | 类型          | 描述        | 约束                |
| -------------- | ------------- | ----------- | ------------------- |
| id             | BIGINT        | 记录主键    | 主键，自增          |
| vehicle_id     | BIGINT        | 所属车辆 ID | 外键 → `vehicle.id` |
| service_date   | DATE          | 服务日期    | 非空                |
| cost           | DECIMAL(10,2) | 总费用      | 非空，默认 0.00     |
| service_person | VARCHAR(50)   | 技师姓名    | 可空                |
| remarks        | TEXT          | 备注        | 可空                |
| create_time    | DATETIME      | 创建时间    | 默认当前时间        |
| update_time    | DATETIME      | 更新时间    | 自动更新时间        |

**索引：**

- `vehicle_id` 外键索引

------

###  `maintenance_item` 服务项目表（1条记录多个项目）

| 字段名    | 类型          | 描述                 | 约束                           |
| --------- | ------------- | -------------------- | ------------------------------ |
| id        | BIGINT        | 主键                 | 自增                           |
| record_id | BIGINT        | 所属维保记录 ID      | 外键 → `maintenance_record.id` |
| item_name | VARCHAR(100)  | 项目名称（换机油等） | 非空                           |
| item_cost | DECIMAL(10,2) | 项目费用             | 可空                           |

**索引：**

- `record_id` 外键索引

------

###  `log` 系统操作日志表

| 字段名      | 类型         | 描述        | 约束             |
| ----------- | ------------ | ----------- | ---------------- |
| id          | BIGINT       | 日志主键    | 自增             |
| user_id     | BIGINT       | 操作用户 ID | 外键 → `user.id` |
| operation   | VARCHAR(100) | 操作描述    | 如“新增维保记录” |
| ip_address  | VARCHAR(45)  | IP地址      | 可空             |
| create_time | DATETIME     | 时间戳      | 默认当前时间     |

------

## 表之间的关系图（文字描述）

```
[user] 1 --- N [vehicle]  
[vehicle] 1 --- N [maintenance_record]  
[maintenance_record] 1 --- N [maintenance_item]  
[vehicle] 1 --- N [reminder]  
[user] 1 --- N [log]
```



- 接口路径、方法、描述
- 请求参数、响应格式
- 前端建议调用方式
- 鉴权要求（是否需要登录）

技术栈：`Spring Boot + JWT + Mybatis-plus + MySQL`（后端） + `Vue3(ElementPlus) + Axios`（前端）

------

## API 命名规范建议

- 所有接口统一以 `/api/` 开头
- 使用 REST 风格：GET 查询、POST 添加、PUT 修改、DELETE 删除
- 响应格式统一为 JSON
- 鉴权方式用 JWT（登录后存储在 LocalStorage + 请求头）

------

## 通用响应结构

```json
{
  "code": 200,
  "message": "success",
  "data": {...} // 任意类型
}
```

错误时：

```json
{
  "code": 401,
  "message": "Token失效，请重新登录"
}
```

------

## 用户认证模块

### 1. 注册

```
POST /api/auth/register
```

**请求体：**

```json
{
  "username": "admin",
  "password": "123456",
  "email": "admin@example.com",
  "phone": "13900000000"
}
```

**响应：**

```json
{
  "code": 200,
  "message": "注册成功"
}
```

------

### 2. 登录

```
POST /api/auth/login
```

**请求体：**

```json
{
  "username": "admin",
  "password": "123456"
}
```

**响应：**

```json
{
  "code": 200,
  "data": {
    "token": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6...",
    "role": "admin",
    "username": "admin"
  }
}
```

------

## 车辆管理模块

### 1. 获取车辆列表（分页 + 模糊查询）

```
GET /api/vehicles?page=1&size=10&keyword=比亚迪
```

**响应：**

```json
{
  "code": 200,
  "data": {
    "total": 100,
    "list": [
      {
        "id": 1,
        "licensePlate": "浙A88888",
        "vin": "XXXX",
        "brand": "比亚迪",
        "model": "汉EV",
        "ownerName": "张三"
      }
    ]
  }
}
```

------

### 2. 获取单个车辆详情

```
GET /api/vehicles/{id}
```

------

### 3. 添加车辆

```
POST /api/vehicles
```

**请求体：**

```json
{
  "licensePlate": "浙A88888",
  "vin": "LFA123456789",
  "brand": "比亚迪",
  "model": "汉EV",
  "ownerName": "张三",
  "ownerPhone": "13900000000"
}
```

------

### 4. 更新车辆信息

```
PUT /api/vehicles/{id}
```

------

### 5. 删除车辆

```
DELETE /api/vehicles/{id}
```

------

## 维保记录模块

### 1. 添加维保记录

```
POST /api/records
```

**请求体：**

```json
{
  "vehicleId": 1,
  "serviceDate": "2025-05-01",
  "cost": 880,
  "servicePerson": "李师傅",
  "remarks": "定期保养",
  "items": [
    {"itemName": "更换机油", "itemCost": 300},
    {"itemName": "轮胎检查", "itemCost": 100}
  ]
}
```

------

### 2. 获取某车辆维保记录（分页）

```
GET /api/records?vehicleId=1&page=1&size=10
```

------

### 3. 获取单条记录详情

```
GET /api/records/{id}
```

------

### 4. 删除记录

```
DELETE /api/records/{id}
```

------

##  数据统计模块

### 1. 每月费用趋势图

```
GET /api/statistics/monthly-cost?vehicleId=1
```

**响应：**

```json
{
  "code": 200,
  "data": {
    "xAxis": ["1月", "2月", "3月"],
    "series": [880, 500, 200]
  }
}
```

------

### 2. 服务项目频率统计

```
GET /api/statistics/popular-items
```



------

## 操作日志

```
GET /api/logs?userId=1&page=1&size=10
```

------

## 前端调用方式（Axios）

### 封装 axios 请求（Vue）

```js
axios.get('/api/vehicles', {
  headers: {
    Authorization: localStorage.getItem('token')
  }
})
```

------



> 前端技术栈：Vue 3 + Vue Router + Axios + Element Plus



# 前端部分



------

## 前端目录结构

```bash
src/
├── api/                  # axios 封装与模块化接口
├── assets/               # 静态资源
├── components/           # 通用组件（表格、表单等）
├── layouts/              # 主布局
├── pages/                # 页面视图
│   ├── auth/             # 登录/注册
│   ├── dashboard/        # 仪表盘首页
│   ├── vehicle/          # 车辆管理模块
│   ├── record/           # 维保记录模块
│   ├── report/           # 统计报表模块
│   ├── reminder/         # 保养提醒（选做）
│   └── log/              # 操作日志页面
├── router/               # Vue Router 路由配置
├── store/                # 状态管理（Pinia）
├── utils/                # 工具方法（如 token 处理）
├── App.vue
└── main.js
```

------

## 页面设计总览（功能 × 页面）

| 页面名称      | 路由                                 | 组件文件                    | 说明                    |
| ------------- | ------------------------------------ | --------------------------- | ----------------------- |
| 登录页        | `/login`                             | `pages/auth/Login.vue`      | JWT 登录表单            |
| 仪表盘        | `/dashboard`                         | `pages/dashboard/Index.vue` | 首页欢迎页/系统概况     |
| 车辆列表      | `/vehicles`                          | `pages/vehicle/List.vue`    | 显示所有车辆 + 搜索分页 |
| 添加/编辑车辆 | `/vehicles/add` `/vehicles/edit/:id` | `pages/vehicle/Form.vue`    | 车辆录入、修改          |
| 维保记录列表  | `/records`                           | `pages/record/List.vue`     | 显示所有记录，支持筛选  |
| 添加维保记录  | `/records/add`                       | `pages/record/Form.vue`     | 记录录入表单            |
| 报表图表页    | `/reports`                           | `pages/report/Index.vue`    | 展示费用趋势、项目排行  |
| 保养提醒列表  | `/reminders`                         | `pages/reminder/List.vue`   | 预计保养车辆（选做）    |
| 操作日志列表  | `/logs`                              | `pages/log/List.vue`        | 系统日志浏览            |

------

## 关键页面结构示意

###  登录页（Login.vue）

- 表单字段：用户名、密码
- 提交后保存 token 到 localStorage，跳转 `/dashboard`
- 验证失败提示错误信息

### 车辆管理页面（VehicleList.vue）

#### 🔹 功能点：

- 表格展示：车牌号、VIN、车主、品牌、操作
- 支持搜索（车牌/车主名模糊匹配）
- 添加、编辑、删除（跳转到 Form 页面）

#### 🔹 表格结构：

| 车牌号   | 品牌   | 型号 | 车主 | 电话    | 操作        |
| -------- | ------ | ---- | ---- | ------- | ----------- |
| 浙A88888 | 比亚迪 | 汉EV | 张三 | 138xxxx | 编辑 / 删除 |

------

###  维保记录页面（RecordList.vue）

#### 🔹 功能点：

- 关联车辆过滤记录
- 展示服务日期、费用、服务人、项目摘要
- 点击查看详情或编辑

------

###  添加维保记录页面（RecordForm.vue）

- 所属车辆（下拉选择）
- 服务时间（日期选择器）
- 服务项目（动态添加行）
- 技师、备注、费用

------

### 报表页面（Report.vue）

#### 🔹 图表推荐：

-  每月费用统计柱状图（ECharts）
-  总费用趋势折线图
-  服务项目频率词云/条形图

------

###  操作日志页面（LogList.vue）

| 用户名 | 操作              | IP 地址   | 时间             |
| ------ | ----------------- | --------- | ---------------- |
| admin  | 删除车辆 浙A00001 | 127.0.0.1 | 2025-05-23 12:33 |

支持关键词搜索 / 分页加载

------

###  页面路由配置示意（router/index.js）

```js
const routes = [
  { path: '/login', component: () => import('@/pages/auth/Login.vue') },
  {
    path: '/',
    component: () => import('@/layouts/MainLayout.vue'),
    children: [
      { path: '', redirect: '/dashboard' },
      { path: 'dashboard', component: () => import('@/pages/dashboard/Index.vue') },
      { path: 'vehicles', component: () => import('@/pages/vehicle/List.vue') },
      { path: 'vehicles/add', component: () => import('@/pages/vehicle/Form.vue') },
      { path: 'vehicles/edit/:id', component: () => import('@/pages/vehicle/Form.vue') },
      { path: 'records', component: () => import('@/pages/record/List.vue') },
      { path: 'records/add', component: () => import('@/pages/record/Form.vue') },
      { path: 'reports', component: () => import('@/pages/report/Index.vue') },
      { path: 'logs', component: () => import('@/pages/log/List.vue') }
    ]
  }
]
```

------

## 组件

| 组件名            | 功能                       |
| ----------------- | -------------------------- |
| `VehicleCard.vue` | 车辆简要卡片组件（可复用） |
| `Pagination.vue`  | 分页组件封装               |
| `SearchBar.vue`   | 搜索输入栏封装             |
| `FormDialog.vue`  | 表单弹窗复用组件           |
| `ChartCard.vue`   | ECharts 封装图卡组件       |





